<!DOCTYPE html>
<html lang="en">
<head>
<title>Physicians Per 100,000 Population</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
html,body,h1,h2,h3,h4 {font-family: "Roboto", sans-serif;}
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
</style>
</head>

/*include html script from https://www.w3schools.com/howto/howto_html_include.asp */
<script>
function includeHTML() {
  var z, i, elmnt, file, xhttp;
  /*loop through a collection of all HTML elements:*/
  z = document.getElementsByTagName("*");
  for (i = 0; i < z.length; i++) {
    elmnt = z[i];
    /*search for elements with a certain attribute:*/
    file = elmnt.getAttribute("w3-include-html");
    if (file) {
      /*make an HTTP request using the attribute value as the file name:*/
      xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4) {
          if (this.status == 200) {elmnt.innerHTML = this.responseText;}
          if (this.status == 404) {elmnt.innerHTML = "Page not found.";}
          /*remove the attribute, and call this function once more:*/
          elmnt.removeAttribute("w3-include-html");
          includeHTML();
        }
      }      
      xhttp.open("GET", file, true);
      xhttp.send();
      /*exit the function:*/
      return;
    }
  }
};
</script>

<body>

<!-- Navbar -->
<div class="w3-top">
  <div class="w3-bar w3-theme w3-top w3-left-align w3-large">
    <a class="w3-bar-item w3-button w3-right w3-hide-large w3-hover-white w3-large w3-theme-l1" href="javascript:void(0)" onclick="w3_open()"><i class="fa fa-bars"></i></a>
    <a href="#" class="w3-bar-item w3-button w3-theme-l1">Physicians Per 100,000 Population</a>
    <a href="https://www.linkedin.com/in/maguirejon/" target="_blank" class="w3-bar-item w3-button w3-theme-l3">Jon Maguire on LinkedIn</a>
    <!--   
    <a href="#" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Values</a>
    <a href="#" class="w3-bar-item w3-button w3-hide-small w3-hover-white">News</a>
    <a href="#" class="w3-bar-item w3-button w3-hide-small w3-hover-white">Contact</a>
    <a href="#" class="w3-bar-item w3-button w3-hide-small w3-hide-medium w3-hover-white">Clients</a>
    <a href="#" class="w3-bar-item w3-button w3-hide-small w3-hide-medium w3-hover-white">Partners</a>
    -->
  </div>
</div>
  
<!-- Sidebar -->
<nav class="w3-sidebar w3-bar-block w3-collapse w3-large w3-theme-l5 w3-animate-left" id="mySidebar">
  <a href="javascript:void(0)" onclick="w3_close()" class="w3-right w3-xlarge w3-padding-large w3-hover-black w3-hide-large" title="Close Menu">
    <i class="fa fa-remove"></i>
  </a>
  <h4 class="w3-bar-item"><b>Contents</b></h4>
  <a class="w3-bar-item w3-button w3-hover-black" href="#">Executive Summary</a>
  <a class="w3-bar-item w3-button w3-hover-black" href="#h2">Background & Motivation</a>
  <a class="w3-bar-item w3-button w3-hover-black" href="#h3">Interactive Visualization</a>
  <a class="w3-bar-item w3-button w3-hover-black" href="#h4">Data & Tools</a>
</nav>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- Main content: shift it to the right by 250 pixels when the sidebar is visible -->
<div class="w3-main" style="margin-left:250px">

  <div id="h1">
  <div class="w3-row w3-padding-32">
    <div class="w3-twothird w3-container">
      <h1 class="w3-text-teal" href="#">Executive Summary</h1>
      <ul>
        <li>Local and national news stories about <b>doctor shortages</b> were used as motivation for looking at publicly available county-level data on the presence of doctors. The analysis leverages data through 2020 from the <a href="https://data.hrsa.gov/topics/health-workforce/ahrf" rel="nofollow" target="_blank">Area Health Resources File (AHRF from DHHS)</a> which has fields sourced from AMA Physician Masterfiles.</li>
	      <li><b><font color="blue">The news stories about doctor shortages were largely confirmed in this exploratory analysis, and it shows that Santa Barbara County looks particularly bad when compared against similar counties.</font></b></li>
        <li><b>Counts of office-based physicians (MDs or DOs) whose primary activity is patient care in office-based settings </b>were used as these are likely to be driving public perception. Rates per 100,000 population were constructed for comparability.</li>
	      <li>Santa Barbara compares favorably (88th percentile) against all other US counties. However, comparisons worsen against more similar counties. <b>Santa Barbara is at the 45th percentile among 100 similar counties, </b>and was below the mean.</li>
        <li><b>Against similar counties, Santa Barbara compares more favorably when it comes to specialists (57th percentile) than when it comes to General Practitioners (28th percentile). </b></li>
        <li><b>Santa Barbara has negative trends over the 11 year period, as do all US counties in aggregate, while counties similar to Santa Barbara have more positive trends.</b></li> 
      </ul>
      <p></p>
      <iframe src="https://docs.google.com/presentation/d/e/2PACX-1vRrWPzQmR1WmCnZEkwXvILyaeqloNPgDWvlLyu0MIXsHj6zaduxGbd8CbWuoKcsOBqw30l8UtOKs2Xg/embed?start=true&loop=true&delayms=5000" 
	      frameborder="0" 
	      width="720" 
	      height="430" 
	      allowfullscreen="true" 
	      mozallowfullscreen="true" 
	      webkitallowfullscreen="true"></iframe>
    </div>
  </div>
  </div>
	
  <div id="h2">
  <div class="w3-row w3-padding-32">
    <div class="w3-twothird w3-container">
      <h1 class="w3-text-teal" href="#">Background & Motivation</h1>
      <p>Recently there has been local and national news coverage about shortages in primary care providers. For example, locally here in Santa Barbara the KSBY-TV reporter says &quot;If you&#39;ve called the doctor&#39;s office to schedule an appointment as a new patient recently, you&#39;ve probably been told the wait time to get in will be several weeks or even months.&quot;</p>
      <ul>
        <li><a href="https://www.ksby.com/news/local-news/cant-get-in-to-see-the-doctor-why-theres-a-physician-shortage-and-whats-being-done-about-it" rel="nofollow" target="_blank">KSBY February 9, 2023 - Can&#39;t get in to see the doctor? Why there&#39;s a physician shortage and what&#39;s being done about it</a></li>
      </ul>
      <br>In this NPR story on the national perspective the host says &quot;...we don&#39;t have enough of the kinds of doctors we want in as many places as they&#39;re needed.&quot;</br>
      <iframe src="https://www.npr.org/player/embed/1166873700/1198987675" width="100%" height="240" frameborder="0" scrolling="no" title="NPR embedded audio player"></iframe>
      <p>Both stories cite supporting sources of data, the <a href="https://www.aamc.org/news/press-releases/aamc-supports-resident-physician-shortage-reduction-act-2023" rel="nofollow" target="_blank">Association of American Medical Colleges (AAMC)</a> is cited for the NPR story and <a href="https://letsgethealthy.ca.gov/goals/redesigning-the-health-system/increasing-access-to-healthcare-providers/" rel="nofollow" target="_blank">Lets Get Healthy California with data from the Kaiser Family Foundation (KFF)</a> is cited for the KSBY story. I decided to use this context as motivation to conduct my own analysis using publicly available data.</p>
    </div>
  </div>
  </div>

  <div id="h3">
  <div class="w3-row w3-padding-32">
    <div class="w3-twothird w3-container">
      <h1 class="w3-text-teal" href="#">Interactive Visualization - Tableau</h1>
        <div class='tableauPlaceholder' id='viz1703051298169' style='position: relative'>
          <noscript>
            <a href='#'><img alt='Physicians Per 100,000 Population ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Ph&#47;PhysiciansPer1000Population&#47;Dashboard1&#47;1_rss.png' style='border: none' /></a>
          </noscript>
          <object class='tableauViz'  style='display:none;'>
            <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> 
            <param name='embed_code_version' value='3' /> 
            <param name='site_root' value='' />
            <param name='name' value='PhysiciansPer1000Population&#47;Dashboard1' />
            <param name='tabs' value='no' />
            <param name='toolbar' value='yes' />
            <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Ph&#47;PhysiciansPer1000Population&#47;Dashboard1&#47;1.png' /> 
            <param name='animate_transition' value='yes' />
            <param name='display_static_image' value='yes' />
            <param name='display_spinner' value='yes' />
            <param name='display_overlay' value='yes' />
            <param name='display_count' value='yes' />
            <param name='language' value='en-US' />
          </object>
       </div>                
       <script type='text/javascript'>
         var divElement = document.getElementById('viz1703051298169');                    
         var vizElement = divElement.getElementsByTagName('object')[0];                    
         if ( divElement.offsetWidth > 800 ) { vizElement.style.width='800px';vizElement.style.height='927px';} 
         else if ( divElement.offsetWidth > 500 ) { vizElement.style.width='800px';vizElement.style.height='927px';} 
         else { vizElement.style.width='100%';vizElement.style.height='1477px';}                     
         var scriptElement = document.createElement('script');                    
         scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    
         vizElement.parentNode.insertBefore(scriptElement, vizElement);                
       </script>    
    </div>
  </div>
  </div>
	
  <div id="h4">
  <div class="w3-row w3-padding-32">
    <div class="w3-twothird w3-container">
      <h1 class="w3-text-teal" href="#">Data & Tools</h1>
      <p><b>Tools & Resources</b></p>
      <ul>
	      <li>Publicly available county-level source data were obtained from the <a href="https://data.hrsa.gov/topics/health-workforce/ahrf" rel="nofollow" target="_blank">Area Health Resources File (AHRF from DHHS)</a>.</li>
	      <li>A <a href="https://github.com/magsj/sbar_ca_physicians_per_k" rel="nofollow" target="_blank">GitHub Repository</a> was used for file storage and version control.</li>
	      <li><a href="https://www.sas.com/en_us/software/on-demand-for-academics.html" rel="nofollow" target="_blank">SAS OnDemand for Academics</a> was used for data manipulation and management and for quantitative analysis. The code is parameterized and modular and is designed to be reused in the future. SQL, the SAS macro language, and SAS/STAT procedures are used throughout. The code is heavily commented and the entire process is executed from the master.sas program. You are invited to examine the code in the <a href="https://github.com/magsj/sbar_ca_physicians_per_k" rel="nofollow" target="_blank">GitHub repository</a> using master.sas as a guide. It can be found in the <a href="https://github.com/magsj/sbar_ca_physicians_per_k/tree/main/sas/code" rel="nofollow" target="_blank">/sas/code folder</a>.</li>
	      <li>The outputs from the SAS process are used to describe the processing itself and to supply data to an interactive visualization dashboard produced using <a href="https://public.tableau.com/app/discover" rel="nofollow" target="_blank">Tableau Public</a>.</li>
	      <li>The Tableau interactive visualization dashboard was used to conduct this exploratory analysis and is available <a href="#h3">above</a>.</li>
	      <li>The results were summarized and written up on this website using mostly HTML which is hosted by <a href="https://pages.github.com/" rel="nofollow" target="_blank">GitHub Pages</a>. The website&apos;s HTML is found in index.html also stored in the <a href="https://github.com/magsj/sbar_ca_physicians_per_k" rel="nofollow" target="_blank">GitHub Repository</a> and it can be examined there.</li>
      </ul>
      <p><b>Data Processing Steps</b></p>
      <ol start="0">
        <li>Download and load AHRF data into SAS.</li>
          <ol>
            <li>AHRF ASCII formatted data and documentation were downloaded from the AHRF section of <a href="https://data.hrsa.gov/data/download" rel="nofollow" target="_blank">data.hrsa.gov/data/download</a> and loaded into SAS format using code provided by AHRF in the Technical Documentation.</li>
            <li>Since the file contains thousands of fields a small subset was identified as potentially useful to begin working with.</li>
          </ol>
        <li>Refine feild list further and apply county inclusion/exclusion logic.</li>
          <ul>
            <li>Fields selected to count physicians.</li>
              <ul>
                <li>cbsa_ind_cd_msa: 1 = Metropolitan Statistical Area (Santa Barbara&apos;s classification), else 0</li>
                <li>cbsa_status_central: 1 = Counties with &gt;50% residing in urban areas of 10,000 or more population, or contain at least 5,000 people residing within a single urban area of 10,000+ (Santa Barbara&apos;s classification), else 0</li>
                <li>rur_urb_cntm_cd_02: 1 = Counties in metro areas of 250,000 – 1,000,000 population (Santa Barbara&apos;s classification), else 0</li>
                <li>urb_infl_cd_2: 1 = Counties in a small metro area of less than 1 million residents (Santa Barbara&apos;s classification), else 0</li>
              </ul>
            <li>Fields selected to classify counties by type and status.</li>
              <ul>
                <li>F04603: Non-Federal Office-Based MDs with Primary Activity of Patient Care from the AMA Physician Masterfiles</li>
                <li>F14694: Non-Federal Office-Based MDs with Primary Activity of Patient Care from the AMA Physician Masterfiles</li>
                <li>F08860: Non-Federal Office-Based General Practitioner MDs with Primary Activity of Patient Care from the AMA Physician Masterfiles</li>
                <li>F08861: Non-Federal Office-Based Medical Specialist MDs with Primary Activity of Patient Care from the AMA Physician Masterfiles</li>
              </ul>
            <li>Fields selected to estimate similarity between counties.</li>
              <ul>
                <li>F11984: US Census Bureau Population Estimate</li>
                <li>F06792: Bureau of Labor Statistics Civilian Labor Force Estimate Age 16+</li>
                <li>F14083: US Census Bureau Population Estimate, Age 65+</li>
                <li>F13907: US Census Bureau Population Estimate, Total Female</li>
                <li>F13926+F13927: US Census Bureau Population Estimate, White Non-Hispanic Males+Females</li>
                <li>F09781: US Bureau of Economic Analysis Per Capita Personal Income</li>
                <li>F13223: American Community Survey Persons in Poverty</li>
                <li>F08921: American Hospital Asscoiation Annual Survey of Hospitals Count of Hospital Beds</li>
              </ul>
            <li>Using these fields apply exclusion logic to exclude counties that have no physicians or that represent extreme outliers in terms of physician counts (using the semi-IQR method since the data are skewed), or that have missing data in any of the slected fields. Exclusion results summarized below.</a></li>
              <div w3-include-html="sas/output/p11_excl_smry.html"></div>
	      <ul>
	        <li><a href="sas/output/p11_excluded_counties_dtl.txt" download rel="nofollow" target="_blank">Download pipe delimited list of the excluded counties.</a></li>
		<br>&nbsp;</br>
	        <li>Click <a href="sas/output/p11_incl_desc.html" rel="nofollow" target="_blank">here</a> to view output summarizing the remaining included counties.</li>
	        <li><a href="sas/output/p11_selected_counties.txt" download rel="nofollow" target="_blank">Download pipe delimited list of the included counties.</a></li>
		<br>&nbsp;</br>
              </ul>
        </ul>
        <li>To identify counties similar to Santa Barbara a k-means approach was used to divide all counties into groups of similar counties, and the counties grouped together with Santa Barbara most frequently were designated as similar to Santa Barbara. SAS&apos; <a href="https://support.sas.com/documentation/onlinedoc/stat/131/fastclus.pdf" rel="nofollow" target="_blank">FASTCLUS procedure</a> was used which uses Euclidean distances, so the cluster centers are based on least squares estimation. This kind of clustering method is often called a k-means model, since the cluster centers are the means of the observations assigned to each cluster when the algorithm is run to convergence.</li>
	  <ol>
            <li>Prior to running the clustering algorithm, the data must be checked for corellations since it does not perform well with highly correlated variables. <a href="sas/output/p21_init_corr.html" rel="nofollow" target="_blank">Click to view initial correlation heat map.</a></li>
            <li>After reviewing the coreelation heat map with the initial variables it was found that cbsa_ind_cd_msa, cbsa_status_central, rur_urb_cntm_cd_02, and urb_infl_cd_2 are highly correlated. Rur_urb_cntm_cd_02 indicates counties in metro areas of 250k-1M and urb_infl_cd_2 indicates counties in a small metro area of less than 1M. These are very similar and rur_urb_cntm_cd_02 is more specific so urb_infl_cd_2 was removed. Pct_cvln_lbr_frc_ovr15, prsnl_income, and pct_in_pvrty are also highly correlated. Income and labor force participation might account for more variability in demand for healthcare so pct_in_pvrty was removed. In the resulting correlation matrix no two variables had a correlation coefficient of .6 or more. <a href="sas/output/p22_fnl_corr.html" rel="nofollow" target="_blank">Click to view final correlation heat map.</a></li>
            <li>Finally, PROC FASTCLUS was used to iteratively divide all counties into groups of similar counties, and the counties grouped together with Santa Barbara most frequently were recorded and designated as similar to Santa Barbara. <a href="sas/output/p23_sb_similar_counties.html" rel="nofollow" target="_blank">Click to view the list of 100 counties most similar to Santa Barbara.</a></li>
	  </ol>
        <li>Calculate summary statistics for the latest year (currently 2020) and trend data since 2010, and format data for loading into Tableau.</li>
	  <ol>
            <li>Calculate measures of central tendency and percentiles. <a href="sas/output/p31_y20_stats.html" rel="nofollow" target="_blank">View output.</a></li>
            <li>Format data with measures of central tendency and percentiles for Tableau. <a href="sas/output/p32_phys_per1k_stats_tblo.txt" download rel="nofollow" target="_blank">Download pipe delimited file.</a></li>
            <li>Calculate bins to show distributions.</li>
            <li>Format data with bins to show distributions for Tableau. <a href="sas/output/p34_phys_per1k_bins_tblo.txt" download rel="nofollow" target="_blank">Download pipe delimited file.</a></li>
            <li>Calculate trend data back to 2010. <a href="sas/output/p35_yrs_stats.html" rel="nofollow" target="_blank">View output.</a></li>
            <li>Format trend data back to 2010 for Tableau. <a href="sas/output/p36_phys_per1k_yrs_tblo.txt" download rel="nofollow" target="_blank">Download pipe delimited file.</a></li>
	  </ol>
      </ol>  
    </div>
  </div>
  </div>
  
  <!-- Pagination -->
  <!--
  <div class="w3-center w3-padding-32">
    <div class="w3-bar">
      <a class="w3-button w3-black" href="#">1</a>
      <a class="w3-button w3-hover-black" href="#">2</a>
      <a class="w3-button w3-hover-black" href="#">3</a>
      <a class="w3-button w3-hover-black" href="#">4</a>
      <a class="w3-button w3-hover-black" href="#">5</a>
      <a class="w3-button w3-hover-black" href="#">»</a>
    </div>
  </div>
  -->

  <footer id="myFooter">
    <div class="w3-container w3-theme-l2 w3-padding-16">
      <h4> 
        <img src="https://github.com/magsj.png" class="w3-circle" alt="Jon Maguire" width="42" height="42">
        Author: Jon Maguire <a href="https://www.linkedin.com/in/maguirejon/" target="_blank">linkedin.com/in/maguirejon/</a>
      </h4>
    </div>

    <div class="w3-container w3-theme-l1">
      <p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a></p>
    </div>
  </footer>

<!-- END MAIN -->
</div>

<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}	
</script>
	
<script>includeHTML();</script>
	
</body>
</html>
